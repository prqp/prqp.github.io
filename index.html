<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PRQP</title>
    <link rel="stylesheet" href="style/index.css" />
  </head>
  <body>
    <div id="burger" onclick="toggle_menu()">
      <span></span>
      <span></span>
      <span></span>
      <div id="title"></div>
    </div>
    <div id="menu"></div>
    <div id="page"></div>
    <script>
      //

      const burger = document.querySelector('#burger');
      const menu = document.querySelector('#menu');
      const page = document.querySelector('#page');
      const menu_title = document.querySelector('#title');

      const toggle_menu = () => {
        burger.classList.toggle('checked');
        page.classList.toggle('closed');
      };

      const load_page = ({ title, url, menu_field }) => {
        menu_title.innerText = title;
        fetch(`pages/${url}`)
          .then((res) => res.text())
          .then((html) => {
            page.innerHTML = html;
          });
      };

      fetch('pages/pages.json')
        .then((res) => res.json())
        .then(({ pages }) => {
          pages = pages.sort(({ index: ia }, { index: ib }) => ia < ib);
          if (pages.length > 0) load_page(pages[0]);
          pages.forEach((page) => {
            const h = document.createElement('a');
            h.innerText = page.menu_field;
            h.addEventListener('click', () => {
              toggle_menu();
              load_page(page);
            });
            menu.appendChild(h);
          });
        });

      //
    </script>
  </body>
</html>
